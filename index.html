<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Too Many GiFs, Too Little Time</title>

</head>

<body>
    <h1>Click on the button to see some Gifs, bro!</h1>
    
    <input id="search-bar" type="text">

    <button id="search-button">
        Gif Portal
    </button>

    <div id="gif-div">
        </div>
    

    

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">
        // http://api.giphy.com/v1/gifs/search?q=ryan+gosling&api_key=YOUR_API_KEY&limit=5     
            
        
        // onclick search button, run function
        $("#search-button").on("click", function () {
            var apiKey = "&api_key=L1WjOIVP0GXxib9Lxv6ExK9hleZzFGtL&limit=5&rating=g";
            
            var searchResults = $("#search-bar").val();
            // get values from search bar
            console.log(searchResults);

            // problem is, when i press the search button, its not getting the value of
            // what the user entered in time before the function gets ran.
            
                                                                // searchResults
            var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + searchResults + apiKey;

             
            console.log(queryURL);
            $.ajax({
                url: queryURL,
                method: "GET"
            })
                .then(function (response) {
                    
                    // console.log(response);
                    var results = response.data;
                    console.log(results);

                    // forloop created to run thru each gif, grab the image, and put on html
                    for (var i = 0; i < results.length; i++) {
                    

                        // creating and storing div tag for images
                        var imageDiv = $("<div>");

                        // creating and storing img tag 
                        var newImages = $("<img>")

                        // set the src attr of the image
                        newImages.attr("src", results[i].images.original.url);

                        // appending img tag to imageCache
                        imageDiv.append(newImages);

                        // imageCache.attr("src", imageURL);
                        // imageCache.attr("alt", "...")

                        $("#gif-div").prepend(imageDiv);

                    }
                });


        });

        // search bar
        // 



    </script>



</body>

</html>